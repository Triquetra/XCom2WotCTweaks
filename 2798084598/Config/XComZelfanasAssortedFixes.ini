[ZelfanasAssortedFixes.X2DownloadableContentInfo_ZelfanasAssortedFixes]
DLCIdentifier="ZelfanasAssortedFixes"

; This config file can be dauntingly long but that's a small price to pay for modularity.


; Fix discrepancies in reaction fire shots. Enable reaction fire penalty, disable crits,
;   prevent firing when panicked. Suppression fix has been removed as it was breaking things.
FixReactionFires = true

; You can add reaction fire shot abilities from mods here if they need fixing.
; Only the abilities responsible for the actual attacks go here!

; PistolReturnFire is used by all soldiers despite the name.
;   (Sharpshooter and Skirmisher in vanilla)
+ReactionFireAbilities = PistolReturnFire
; These two are also getting fixed because they share the relevant code.
+ReactionFireAbilities = PistolOverwatchShot
+ReactionFireAbilities = DarkEventAbility_PistolReturnFire
; These are getting fixed to not fire when panicked.
+ReactionFireAbilities = BladestormAttack
+ReactionFireAbilities = TemplarBladestormAttack
+ReactionFireAbilities = RetributionAttack
; Muton counterattack was also able to crit and didn't suffer reaction penalty.
;   They are still able to counter Bladestorm and Retribution, haven't found how to fix that yet.
+ReactionFireAbilities = CounterattackBayonet
; Also fixing other Overwatch shots for good measure.
+ReactionFireAbilities = OverwatchShot
+ReactionFireAbilities = LongWatchShot


; Fix FanFire always not ending the turn, Quickdraw had nothing to do with it.
; If you want Quickdraw to work on it, use robojumper's Quickdraw Fix for that.
FixFanFire = true


; Fix Wraith not having a cooldown, it will be set to be equal to its duration.
; Has no effect if you're using a mod to make Wraith passive.
FixWraithCooldown = true


; You know how Inspire description says you don't need line of sight? Well, it's lying
;   and this is here to fix that. Also prevents using it on units that can't actually act.
; Will apply the same changes to Combat Presence.
FixInspireTargeting = true


; Unify Inspire and Combat Presence by making Inspire not turn ending and
;   changing Combat Presence cooldown to use the Inspire cooldown ini value.
; This is a separate option since it affects balance more.
BuffInspire = true


; Hide spammy Rend Focus damage bonus message that comes up every time a Templar attacks.
; We get it, you lift.
FixRendSpam = true


; Fix Evac buttons not being hidden while out of the Evac zone. Affects Evac, EvacAll and AllEvac.
FixEvacHide = true


; Fix Heavy Weapon icons duplicating when out of charges. Potentially can be
;   used to hide other abilities when they are out of ammo charges.
; Grenades and Medikits are some other items that use this system.
; Grenades are already hidden when out of ammo.
; Most other charge abilities use regular charges. Use HideEmptyCharges for those.
HideEmptyAmmo = true

+EmptyAmmoHideAbilities = BlasterLauncher
+EmptyAmmoHideAbilities = PlasmaBlaster
+EmptyAmmoHideAbilities = RocketLauncher
+EmptyAmmoHideAbilities = ShredderGun
+EmptyAmmoHideAbilities = ShredstormCannon
+EmptyAmmoHideAbilities = Flamethrower
+EmptyAmmoHideAbilities = FlamethrowerMk2
+EmptyAmmoHideAbilities = SparkBlasterLauncher
+EmptyAmmoHideAbilities = SparkPlasmaBlaster
+EmptyAmmoHideAbilities = SparkRocketLauncher
+EmptyAmmoHideAbilities = SparkShredderGun
+EmptyAmmoHideAbilities = SparkShredstormCannon
+EmptyAmmoHideAbilities = SparkFlamethrower
+EmptyAmmoHideAbilities = SparkFlamethrowerMk2
;   Makes sense to also hide these when out of ammo
+EmptyAmmoHideAbilities = BattleScanner
+EmptyAmmoHideAbilities = MimicBeaconThrow
+EmptyAmmoHideAbilities = ThrowAxe

; Uncomment these if you have a mod to change these to not be consumed and you want to hide them when out of ammo:
;+EmptyAmmoHideAbilities = RefractionFieldAbility
;+EmptyAmmoHideAbilities = CombatStims


; Hide abilities if there are currently no valid targets. This is a workaround to enable
;   hiding with both unavailable and empty ammo/charges.
; AA_AbilityUnavailable doesn't work which is why the Evac fix was necessary.
HideNoTargets = true

; Hide Stabilizes if there are no targets, you can still see the charges on the Heal ability.
+NoTargetHideAbilities = MedikitStabilize
+NoTargetHideAbilities = GremlinStabilize
+NoTargetHideAbilities = GremlinStabilize_Shen


; Fix arguably defensive abilities not being set as defensive and therefore breaking concealment.
FixDefensiveConceal = true

+DefensiveAbilities = Revive
+DefensiveAbilities = HolyWarriorM1
+DefensiveAbilities = HolyWarriorM2
+DefensiveAbilities = HolyWarriorM3
+DefensiveAbilities = IcarusJump
+DefensiveAbilities = Teleport


; Fixed Spark Hunter Protocol triggering while still concealed and thus breaking concealment.
; This has a side effect of also making Overdrive unusable while concealed but you'd break
;   concealment with that as well when combined with Wrecking Ball.
FixHunterProtocol = true


; Fix Squadsight not working on some abilities.
; This also fixes Covering Fire and Guardian not working with Long Watch.
FixSquadsight = true

; Direct shot abilities to enable Squadsight for:
+SquadsightAbilities = RapidFire
+SquadsightAbilities = ChainShot
+SquadsightAbilities = HailOfBullets
+SquadsightAbilities = Demolition
; Suppression would work but it's pretty silly, uncomment if you want it anyway
;+SquadsightAbilities = Suppression


; Fix Spark Bit hack bonus not being displayed in the Armory UI.
FixSparkBitHack = true


; Fix Refraction Field not having a Black Market value set, it's not possible to set without
;   a mod doing it so here you go. Will not overwrite a non-zero value set by other mods.
RefractionFieldValue = 10


; Fix Templar Ghost immunities to match Psi Zombies,
;   namely Poison and Mental are added.
FixGhostImmunities = true

; Fix robots not being immune to bleeding. XCOM normally doesn't have access to bleeding
;   attacks so this isn't a big problem in vanilla game but a bugfix anyway.
FixBleedingRobots = true

; Fix Chryssalid Cocoons not being immune to all mind altering effects. This adds Disorient, Unconscious and Mental.
;   They were already immune to Stun so the other ones should also be in.
FixCocoonImmunities = true


; Fix soldiers being awfully quiet when using Throw Axe, the ability had a lot of speech
;   variables unset.
FixThrowAxeSpeech = true


; Fix missing confirm sound on some abilities.
FixConfirmSounds = true

; You can add more abilities with any sound if you know the string for it
+ConfirmSoundAbilities = (Ability = SectopodLightningField, Sound = "TacticalUI_ActivateAbility")
+ConfirmSoundAbilities = (Ability = WrathCannonStage1, Sound = "TacticalUI_ActivateAbility")
+ConfirmSoundAbilities = (Ability = EnergyShield, Sound = "TacticalUI_ActivateAbility")
+ConfirmSoundAbilities = (Ability = EnergyShieldMk3, Sound = "TacticalUI_ActivateAbility")
+ConfirmSoundAbilities = (Ability = LiftOffAvenger, Sound = "TacticalUI_ActivateAbility")
+ConfirmSoundAbilities = (Ability = BlazingPinionsStage1, Sound = "TacticalUI_ActivateAbility")
+ConfirmSoundAbilities = (Ability = PlaceEvacZone, Sound = "TacticalUI_ActivateAbility")
+ConfirmSoundAbilities = (Ability = AbortMission, Sound = "TacticalUI_ActivateAbility")
+ConfirmSoundAbilities = (Ability = Evac, Sound = "TacticalUI_ActivateAbility")
+ConfirmSoundAbilities = (Ability = EvacAll, Sound = "TacticalUI_ActivateAbility")
+ConfirmSoundAbilities = (Ability = AllEvac, Sound = "TacticalUI_ActivateAbility")

+ConfirmSoundAbilities = (Ability = AllOverwatch, Sound = "Unreal2DSounds_OverWatch")


; Fix icons for cut SITREPs that have existing templates in case they are enabled by mods.
; Gives proper icons for: LowVisibility, SitRepStealth, Juggernaut, BlackOps
FixCutSitrepIcons = true


; Enable interact hotkey (V by default) on more abilities.
FixInteractHotkeys = true

+InteractAbilities = Hack_Workstation
+InteractAbilities = Hack_ObjectiveChest
+InteractAbilities = Hack_Scan
+InteractAbilities = Knockout
+InteractAbilities = CarryUnit
+InteractAbilities = Revive
;   Usually you wouldn't see the Loot ability but sometimes it can show up.
+InteractAbilities = Loot


; Fix all kinds of Overwatch/Reload/Hunker Down All/Others mods doing free actions
;   incorrectly and breaking when a Spark uses Overdrive. This option will simply make
;   them require 1 action point while still staying free to use.
; This is the exact same fix Iridar does in Core Collection Meta Mod but that only includes
;   OverwatchAll and OverwatchOthers, including those here if you're not using that mod for some reason.
; If you run into more abilities like this you can add them to the list.
; Note that EvacAll and AllEvac are not included since Evac itself is supposed to stay
;   available without action points left to use.
FixFreeActions = true

+BrokenFreeActionAbilities = OverwatchAll
+BrokenFreeActionAbilities = OverwatchOthers
+BrokenFreeActionAbilities = AllOverwatch
+BrokenFreeActionAbilities = AllReload
+BrokenFreeActionAbilities = AllHunkerDown
+BrokenFreeActionAbilities = OthersHunkerDown
+BrokenFreeActionAbilities = SmartOverwatch_Trigger
+BrokenFreeActionAbilities = EvacAll_Trigger
+BrokenFreeActionAbilities = SystemInfiltration_Trigger
+BrokenFreeActionAbilities = ScoutingProtocol_Trigger
+BrokenFreeActionAbilities = GremlinLootProtocol_Trigger


; Add Overwatch All from Various Options mod to pistol users, it was only being added
;   to units who had regular Overwatch so this excluded Templars and Sharpshooters.
FixVariousOptions = true


; Change ability order on the bar. Partially a fix, partially preference.
; Fully configurable if you don't like the new order of things.
ChangeAbilityPriorities = true

; All priorities for reference
;-----------------------------------------------------------------
; PARRY_PRIORITY					= 50
; REND_PRIORITY						= 60
; SHOULD_HUNKER_PRIORITY			= 69
; MUST_RELOAD_PRIORITY 				= 70
; STANDARD_SHOT_PRIORITY 			= 100
; OVERWATCH_PRIORITY				= 200
; STANDARD_PISTOL_SHOT_PRIORITY 	= 210
; PISTOL_OVERWATCH_PRIORITY			= 220
; OBJECTIVE_INTERACT_PRIORITY 		= 230
; EVAC_PRIORITY						= 240
; CLASS_SQUADDIE_PRIORITY			= 310
; CLASS_CORPORAL_PRIORITY			= 320
; CLASS_SERGEANT_PRIORITY			= 330
; CLASS_LIEUTENANT_PRIORITY			= 340
; CLASS_CAPTAIN_PRIORITY			= 350
; CLASS_MAJOR_PRIORITY				= 360
; CLASS_COLONEL_PRIORITY			= 370
; HUNKER_DOWN_PRIORITY 				= 400
; INTERACT_PRIORITY 				= 500
; HACK_PRIORITY 					= 600 ; Some hack abilities go here by default, not all of them, though
; LOOT_PRIORITY 					= 700 ; Loot button does show up here by default if you somehow didn't auto-pick-up the loot
; RELOAD_PRIORITY 					= 800
; STABILIZE_PRIORITY				= 900
; MEDIKIT_HEAL_PRIORITY				= 1000
; COMBAT_STIMS_PRIORITY				= 1100
; UNSPECIFIED_PRIORITY 				= 1200 ; Unspecified priorities may or may not go here
; STANDARD_GRENADE_PRIORITY 		= 1300 ; All grenades are in here by default
; ALIEN_GRENADE_PRIORITY 			= 1400 ; Unused by default
; FLASH_BANG_PRIORITY 				= 1500 ; Unused by default
; FIREBOMB_PRIORITY					= 1600 ; Unused by default
; STASIS_LANCE_PRIORITY				= 1700 ; Skulljack and Skullmine
; ARMOR_ACTIVE_PRIORITY				= 1800 ; Armor abilities, includes some heavy weapons by default
; PLACE_EVAC_PRIORITY				= 2000 ; Technically unused by default, Call Skyranger button has special handling instead
;-----------------------------------------------------------------

; Putting Loot up in front because you probably want to use it when it is visible.
+ReorderedAbilities = (Ability = Loot, Priority = 40)

; Objective abilities that weren't correctly set to be at the objective priority.
; Moving all hack abilities here, too, because the only hack that isn't
;   an objective or in the way to the objective is the ADVENT scanner pole.

;   Knockout gets higher priority.
+ReorderedAbilities = (Ability = Knockout, Priority = 229)
+ReorderedAbilities = (Ability = Hack_Chest, Priority = 230)
+ReorderedAbilities = (Ability = ChallengeMode_Hack, Priority = 230)
+ReorderedAbilities = (Ability = ChallengeMode_Hack_Workstation, Priority = 230)
+ReorderedAbilities = (Ability = ChallengeMode_Hack_ObjectiveChest, Priority = 230)
+ReorderedAbilities = (Ability = Hack_ElevatorControl, Priority = 230)
+ReorderedAbilities = (Ability = Interact_MarkSupplyCrate, Priority = 230)
+ReorderedAbilities = (Ability = Interact_OpenChest, Priority = 230)
+ReorderedAbilities = (Ability = GatherEvidence, Priority = 230)
+ReorderedAbilities = (Ability = PlantExplosiveMissionDevice, Priority = 230)
+ReorderedAbilities = (Ability = Interact_ActivateSpark, Priority = 230)
+ReorderedAbilities = (Ability = Interact_AtmosphereComputer, Priority = 230)
+ReorderedAbilities = (Ability = IntrusionProtocol_Chest, Priority = 231)
+ReorderedAbilities = (Ability = IntrusionProtocol_Workstation, Priority = 231)
+ReorderedAbilities = (Ability = IntrusionProtocol_ObjectiveChest, Priority = 231)
+ReorderedAbilities = (Ability = IntrusionProtocol_Scan, Priority = 231)
+ReorderedAbilities = (Ability = CarryUnit, Priority = 232)
+ReorderedAbilities = (Ability = CarryUnitWorkaround, Priority = 233)
+ReorderedAbilities = (Ability = Hack, Priority = 234)
+ReorderedAbilities = (Ability = IntrusionProtocol, Priority = 234)
+ReorderedAbilities = (Ability = GremlinLootProtocol, Priority = 236)

; Evac itself doesn't want to move, just including default values for reference
;+ReorderedAbilities = (Ability = Evac, Priority = 240)
;+ReorderedAbilities = (Ability = AbortMission, Priority = 240)
;+ReorderedAbilities = (Ability = PlaceEvacZone, Priority = 2000)
;   Putting other evac abilities here
+ReorderedAbilities = (Ability = EvacCarryOnly, Priority = 239)
+ReorderedAbilities = (Ability = RM_PhantomEvac, Priority = 239)
+ReorderedAbilities = (Ability = Interact_UseElevator, Priority = 240)

; Class abilities
;   Some do not have priority set which is why their order is all over the place.
;   Some are just in the wrong order compared to the ability trees.
;   (possibly changed positions during development and didn't get fixed)

; Spark
;   Melee attacks get an exception to normal rank order
+ReorderedAbilities = (Ability = Strike, Priority = 309)
+ReorderedAbilities = (Ability = Overdrive, Priority = 310)
+ReorderedAbilities = (Ability = Bombard, Priority = 350)
+ReorderedAbilities = (Ability = Repair, Priority = 351)
+ReorderedAbilities = (Ability = Nova, Priority = 370)
+ReorderedAbilities = (Ability = Sacrifice, Priority = 371)

; Skirmisher
;   Bundling ripjack attacks at the front
+ReorderedAbilities = (Ability = Justice, Priority = 307)
+ReorderedAbilities = (Ability = SkirmisherVengeance, Priority = 308)
+ReorderedAbilities = (Ability = SkirmisherMelee, Priority = 309)
+ReorderedAbilities = (Ability = Whiplash, Priority = 340)
+ReorderedAbilities = (Ability = CombatPresence, Priority = 350)
+ReorderedAbilities = (Ability = SkirmisherInterrupt, Priority = 351)
+ReorderedAbilities = (Ability = Battlelord, Priority = 370)
+ReorderedAbilities = (Ability = ManualOverride, Priority = 371)
;   Same placement with other grapples
+ReorderedAbilities = (Ability = SkirmisherGrapple, Priority = 1801)

; Reaper
+ReorderedAbilities = (Ability = ThrowClaymore, Priority = 310)
+ReorderedAbilities = (Ability = ThrowShrapnel, Priority = 310)
+ReorderedAbilities = (Ability = HomingMine, Priority = 311)
+ReorderedAbilities = (Ability = RemoteStart, Priority = 320)
+ReorderedAbilities = (Ability = Sting, Priority = 350)
+ReorderedAbilities = (Ability = SoulReaper, Priority = 360)
;   Moving Shadow so it can be bundled with Refraction Field
+ReorderedAbilities = (Ability = Shadow, Priority = 710)

; Templar
;   Moving Parry after Rend, it still overrides its position to be in the front when your only action left is Momentum.
;   It's all the way at the end otherwise which is annoying if you wanted to use it during
;       a Reaper streak or when getting extra action points from a squadmate after Rending.
+ReorderedAbilities = (Ability = ParryActivate, Priority = 61)
+ReorderedAbilities = (Ability = Volt, Priority = 310)
+ReorderedAbilities = (Ability = Amplify, Priority = 320)
+ReorderedAbilities = (Ability = StunStrike, Priority = 330)
+ReorderedAbilities = (Ability = Pillar, Priority = 331)
+ReorderedAbilities = (Ability = TemplarInvert, Priority = 350)
+ReorderedAbilities = (Ability = TemplarExchange, Priority = 360)
+ReorderedAbilities = (Ability = VoidConduit, Priority = 370)
+ReorderedAbilities = (Ability = IonicStorm, Priority = 371)
+ReorderedAbilities = (Ability = Ghost, Priority = 372)

; Ranger
+ReorderedAbilities = (Ability = SwordSlice, Priority = 308)
+ReorderedAbilities = (Ability = RunAndGun, Priority = 340)
+ReorderedAbilities = (Ability = RapidFire, Priority = 370)
+ReorderedAbilities = (Ability = Reaper, Priority = 375)
;   Moving Conceal so it can be bundled with Refraction Field.
+ReorderedAbilities = (Ability = Stealth, Priority = 711)

; Specialist
+ReorderedAbilities = (Ability = AidProtocol, Priority = 310)
+ReorderedAbilities = (Ability = CombatProtocol, Priority = 320)
+ReorderedAbilities = (Ability = CombatProtocol_Shen, Priority = 320)
+ReorderedAbilities = (Ability = RevivalProtocol, Priority = 330)
+ReorderedAbilities = (Ability = HaywireProtocol, Priority = 331)
+ReorderedAbilities = (Ability = ScanningProtocol, Priority = 340)
+ReorderedAbilities = (Ability = CapacitorDischarge, Priority = 370)
+ReorderedAbilities = (Ability = CapacitorDischarge_Shen, Priority = 370)
+ReorderedAbilities = (Ability = RestorativeMist, Priority = 371)
;   Gremlin Healing Protocol replaces Medikit, use the same priorities.
+ReorderedAbilities = (Ability = GremlinStabilize, Priority = 900)
+ReorderedAbilities = (Ability = GremlinStabilize_Shen, Priority = 900)
+ReorderedAbilities = (Ability = GremlinHeal, Priority = 1000)
+ReorderedAbilities = (Ability = GremlinHeal_Shen, Priority = 1000)

; Grenadier
+ReorderedAbilities = (Ability = Demolition, Priority = 330)
+ReorderedAbilities = (Ability = Suppression, Priority = 331)
+ReorderedAbilities = (Ability = ChainShot, Priority = 350)
+ReorderedAbilities = (Ability = HailOfBullets, Priority = 360)
+ReorderedAbilities = (Ability = BulletShred, Priority = 370)
+ReorderedAbilities = (Ability = SaturationFire, Priority = 371)

; Sharpshooter
+ReorderedAbilities = (Ability = Deadeye, Priority = 320)
+ReorderedAbilities = (Ability = LightningHands, Priority = 332)
+ReorderedAbilities = (Ability = Faceoff, Priority = 333)
+ReorderedAbilities = (Ability = FanFire, Priority = 334)
;   Kill Zone after Fan Fire just so the pistol abilities are all together.
+ReorderedAbilities = (Ability = KillZone, Priority = 350)
+ReorderedAbilities = (Ability = InTheZone, Priority = 376)

; Psi Operative
+ReorderedAbilities = (Ability = Soulfire, Priority = 310)
+ReorderedAbilities = (Ability = Insanity, Priority = 311)
+ReorderedAbilities = (Ability = Inspire, Priority = 320)
+ReorderedAbilities = (Ability = Stasis, Priority = 330)
+ReorderedAbilities = (Ability = Fuse, Priority = 360)
+ReorderedAbilities = (Ability = Domination, Priority = 369)
+ReorderedAbilities = (Ability = NullLance, Priority = 370)
+ReorderedAbilities = (Ability = VoidRift, Priority = 371)
; Commander's Avatar gets these:
+ReorderedAbilities = (Ability = PsiMindControl, Priority = 369)
+ReorderedAbilities = (Ability = PsiDimensionalRiftStage1, Priority = 371)

; Bond ability priority after class abilities, they go weirdly inbetween them by default.
+ReorderedAbilities = (Ability = BondmateTeamwork, Priority = 390)
+ReorderedAbilities = (Ability = BondmateTeamwork_Improved, Priority = 390)
+ReorderedAbilities = (Ability = BondmateDualStrike, Priority = 391)

; Close range interact abilities
+ReorderedAbilities = (Ability = StabilizeMedkitOwner, Priority = 480)
+ReorderedAbilities = (Ability = AllyStabilize, Priority = 480)
+ReorderedAbilities = (Ability = OnSelf_MedikitHeal, Priority = 481)
+ReorderedAbilities = (Ability = OnSelf_NanoMedikitHeal, Priority = 481)
+ReorderedAbilities = (Ability = OnSelf_BioMedikitHeal, Priority = 481)
;   Put Down Unit should always be after Evac abilities so you can use Spacebar/Enter for Evac.
+ReorderedAbilities = (Ability = PutDownUnit, Priority = 501)

; Hack reward Run And Gun
+ReorderedAbilities = (Ability = Blitz, Priority = 690)

; Miscellaneous items
;   Throw Axe next to Slash
+ReorderedAbilities = (Ability = ThrowAxe, Priority = 309)
;   Shadowfall after other pistol abilities
+ReorderedAbilities = (Ability = Shadowfall, Priority = 335)
;   All concealment abilities together
+ReorderedAbilities = (Ability = SitRepStealth, Priority = 740)
+ReorderedAbilities = (Ability = RefractionFieldAbility, Priority = 750)
;   Other random items before grenades
+ReorderedAbilities = (Ability = BattleScanner, Priority = 1200)
+ReorderedAbilities = (Ability = MimicBeaconThrow, Priority = 1200)

; Heavy weapons
;   Unused firebomb priority puts these after grenades.
+ReorderedAbilities = (Ability = BlasterLauncher, Priority = 1600)
+ReorderedAbilities = (Ability = PlasmaBlaster, Priority = 1600)
+ReorderedAbilities = (Ability = RocketLauncher, Priority = 1600)
+ReorderedAbilities = (Ability = ShredderGun, Priority = 1600)
+ReorderedAbilities = (Ability = ShredstormCannon, Priority = 1600)
+ReorderedAbilities = (Ability = Flamethrower, Priority = 1600)
+ReorderedAbilities = (Ability = FlamethrowerMk2, Priority = 1600)
; Spark heavy weapons
+ReorderedAbilities = (Ability = SparkBlasterLauncher, Priority = 1600)
+ReorderedAbilities = (Ability = SparkPlasmaBlaster, Priority = 1600)
+ReorderedAbilities = (Ability = SparkRocketLauncher, Priority = 1600)
+ReorderedAbilities = (Ability = SparkShredderGun, Priority = 1600)
+ReorderedAbilities = (Ability = SparkShredstormCannon, Priority = 1600)
+ReorderedAbilities = (Ability = SparkFlamethrower, Priority = 1600)
+ReorderedAbilities = (Ability = SparkFlamethrowerMk2, Priority = 1600)

; Armor abilities
+ReorderedAbilities = (Ability = WallPhasing, Priority = 1800)
+ReorderedAbilities = (Ability = FreezingLash, Priority = 1800)
+ReorderedAbilities = (Ability = IcarusJump, Priority = 1800)
+ReorderedAbilities = (Ability = Ragestrike, Priority = 1800)
+ReorderedAbilities = (Ability = HighCoverGenerator, Priority = 1800)
+ReorderedAbilities = (Ability = Grapple, Priority = 1801)
+ReorderedAbilities = (Ability = GrapplePowered, Priority = 1801)

; Moving to the end of the bar
+ReorderedAbilities = (Ability = EvacAll, Priority = 2000)
+ReorderedAbilities = (Ability = AllEvac, Priority = 2000)
;   I would love to put Interact_ActivateAscensionGate here but it has the same problem as Evac.
;+ReorderedAbilities = (Ability = Interact_ActivateAscensionGate, Priority = 2010)
+ReorderedAbilities = (Ability = LiftOffAvenger, Priority = 2000)
+ReorderedAbilities = (Ability = OverwatchAll, Priority = 2001)
+ReorderedAbilities = (Ability = AllOverwatch, Priority = 2001)
+ReorderedAbilities = (Ability = OverwatchOthers, Priority = 2002)
+ReorderedAbilities = (Ability = AllReload, Priority = 2010)
+ReorderedAbilities = (Ability = HunkerAll, Priority = 2020)
+ReorderedAbilities = (Ability = AllHunkerDown, Priority = 2020)
+ReorderedAbilities = (Ability = HunkerOthers, Priority = 2021)
+ReorderedAbilities = (Ability = OthersHunkerDown, Priority = 2021)
+ReorderedAbilities = (Ability = SeverLink, Priority = 2100)


; Remove objective ability coloring to use ability source based coloring instead.
; There is a check in place to not remove custom color if it differs from the default.
; This lets you configure them better with Cost-Based Ability Colors.
; Ability source for objective abilities is set to Commander instead,
;   effectively they look the same but are easier to configure.
RemoveObjectiveColoring = true

+ObjectiveAbilities = CarryUnit
+ObjectiveAbilities = ChallengeMode_Hack
+ObjectiveAbilities = ChallengeMode_Hack_ObjectiveChest
+ObjectiveAbilities = ChallengeMode_Hack_Workstation
+ObjectiveAbilities = GatherEvidence
+ObjectiveAbilities = Hack
+ObjectiveAbilities = Hack_Chest
+ObjectiveAbilities = Hack_ElevatorControl
+ObjectiveAbilities = Hack_ObjectiveChest
+ObjectiveAbilities = Hack_Scan
+ObjectiveAbilities = Hack_Workstation
+ObjectiveAbilities = Interact_ActivateSpark
+ObjectiveAbilities = Interact_AtmosphereComputer
+ObjectiveAbilities = Interact_DLC2Transmitter
+ObjectiveAbilities = Interact_MarkSupplyCrate
+ObjectiveAbilities = Interact_OpenChest
+ObjectiveAbilities = Interact_PlantBomb
+ObjectiveAbilities = Interact_StasisTube
+ObjectiveAbilities = Interact_SweaterTube
+ObjectiveAbilities = Interact_TakeVial
+ObjectiveAbilities = IntrusionProtocol
+ObjectiveAbilities = IntrusionProtocol_Chest
+ObjectiveAbilities = IntrusionProtocol_Hack_ElevatorControl
+ObjectiveAbilities = IntrusionProtocol_ObjectiveChest
+ObjectiveAbilities = IntrusionProtocol_Scan
+ObjectiveAbilities = IntrusionProtocol_Workstation
+ObjectiveAbilities = Knockout
+ObjectiveAbilities = PlantExplosiveMissionDevice
+ObjectiveAbilities = PutDownUnit


; Fix ability sources, this corrects their icon color.
; Works in conjunction with Cost-Based Ability Colors.
FixAbilitySources = true

; All sources for reference
;-----------------------------------------------------------------
; 'eAbilitySource_Perk'       yellow
; 'eAbilitySource_Debuff'     red
; 'eAbilitySource_Psionic'    purple
; 'eAbilitySource_Commander'  green
; 'eAbilitySource_Item'       blue
; 'eAbilitySource_Standard'   blue
;-----------------------------------------------------------------

+SourceNameAbilities = (Ability = PistolStandardShot, Source = eAbilitySource_Standard)
+SourceNameAbilities = (Ability = PistolOverwatch, Source = eAbilitySource_Standard)

+SourceNameAbilities = (Ability = SustainingSphereAbility, Source = eAbilitySource_Item)
+SourceNameAbilities = (Ability = SustainingSphereTriggeredAbility, Source = eAbilitySource_Item)
+SourceNameAbilities = (Ability = ThrowAxe, Source = eAbilitySource_Item)
+SourceNameAbilities = (Ability = Shadowfall, Source = eAbilitySource_Item)

+SourceNameAbilities = (Ability = MeleeResistance, Source = eAbilitySource_Perk)

+SourceNameAbilities = (Ability = HolyWarriorM1, Source = eAbilitySource_Psionic)
+SourceNameAbilities = (Ability = HolyWarriorM2, Source = eAbilitySource_Psionic)
+SourceNameAbilities = (Ability = HolyWarriorM3, Source = eAbilitySource_Psionic)
+SourceNameAbilities = (Ability = HolyWarriorMP, Source = eAbilitySource_Psionic)
+SourceNameAbilities = (Ability = KillSiredZombies, Source = eAbilitySource_Psionic)
+SourceNameAbilities = (Ability = SeverLink, Source = eAbilitySource_Psionic)

+SourceNameAbilities = (Ability = Interact_UseElevator, Source = eAbilitySource_Commander)
;   Interact_ActivateAscensionGate is ignoring all modifications for some reason so this doesn't actually do anything
+SourceNameAbilities = (Ability = Interact_ActivateAscensionGate, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = AbortMission, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Evac, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = AllEvac, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = EvacCarryOnly, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = OverwatchAll, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = OverwatchOthers, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = AllOverwatch, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = AllReload, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = AllHunkerDown, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = HunkerAll, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = HunkerOthers, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = OthersHunkerDown, Source = eAbilitySource_Commander)

+SourceNameAbilities = (Ability = ChallengeMode_Hack, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = ChallengeMode_Hack_ObjectiveChest, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = ChallengeMode_Hack_Workstation, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = GatherEvidence, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Hack, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Hack_Chest, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Hack_ElevatorControl, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Hack_ObjectiveChest, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Hack_Scan, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Hack_Workstation, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Interact_ActivateSpark, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Interact_AtmosphereComputer, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Interact_DLC2Transmitter, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Interact_MarkSupplyCrate, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Interact_OpenChest, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Interact_PlantBomb, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Interact_StasisTube, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Interact_SweaterTube, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Interact_TakeVial, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = IntrusionProtocol, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = IntrusionProtocol_Chest, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = IntrusionProtocol_Hack_ElevatorControl, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = IntrusionProtocol_ObjectiveChest, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = IntrusionProtocol_Scan, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = IntrusionProtocol_Workstation, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = Knockout, Source = eAbilitySource_Commander)
+SourceNameAbilities = (Ability = PlantExplosiveMissionDevice, Source = eAbilitySource_Commander)

+SourceNameAbilities = (Ability = BondmateDualStrike, Source = eAbilitySource_Commander)


; Hide the listed abilities when they are out of charges. Only for abilities with regular charges.
; Most utility items use ammo charges or get consumed outright instead, use HideEmptyAmmo for those.
HideEmptyCharges = true

; Only Homing Mine doesn't hide of Reaper's Claymore abilities. As ThrowClaymore and ThrowShrapnel normally hide
;   they are in the always show list further below so take them out of that list if you want to hide them instead.
+EmptyChargesHideAbilities = HomingMine

; These item based abilities use normal charges:
+EmptyChargesHideAbilities = MedikitHeal
+EmptyChargesHideAbilities = NanoMedikitHeal
+EmptyChargesHideAbilities = MedikitStabilize
+EmptyChargesHideAbilities = GremlinHeal
+EmptyChargesHideAbilities = GremlinStabilize
+EmptyChargesHideAbilities = GremlinHeal_Shen
+EmptyChargesHideAbilities = GremlinStabilize_Shen
+EmptyChargesHideAbilities = SKULLMINEAbility
+EmptyChargesHideAbilities = WallPhasing
+EmptyChargesHideAbilities = Shadowfall
+EmptyChargesHideAbilities = Ragestrike
+EmptyChargesHideAbilities = FreezingLash
+EmptyChargesHideAbilities = IcarusJump


; Uncomment these 4 config lines to make Skulljack behave like an objective ability,
;   only showing up when usable, using objective priority
;   and colored green via ability source.
; You also have to enable HideEmptyCharges to make it properly hide after it has been used
;   but there are still valid targets around.

;+NoTargetHideAbilities = SKULLJACKAbility
;+EmptyChargesHideAbilities = SKULLJACKAbility
;+ReorderedAbilities = (Ability = SKULLJACKAbility, Priority = 235)
;+SourceNameAbilities = (Ability = SKULLJACKAbility, Source = eAbilitySource_Commander)


; Make Revive (the Chosen Daze removal ability) not free to use, taking
;   one action to use instead. Also, uncomment the line to change its priority
;   to not be in the front since it's no longer a no-brainer.
; Revival Protocol and Solace will still remove Daze as usual
;   so they become more important and useful to counter it.
NotFreeRevive = true

+ReorderedAbilities = (Ability = Revive, Priority = 490)


; Make Proximity Mine exploding not break concealment similar to Reaper Claymore.
; In-game text will not reflect this change automatically, you will have to change it manually.
; The included localization has commented out lines that can do that.
ProximityMineRetainsConcealment = true


; Fix Mimic Beacon forcibly breaking concealment with an effect. It will only break concealment if
;   you throw it in the detection range of an enemy. UI doesn't warn about concealment breaking if
;   the Mimic would be detected in the target location.
; If the thrower has Phantom or Shadow they will stay in concealment but
;   the rest of the squad will still be revealed.
FixMimicConceal = true


; Override items to not break concealment when used. Proximity Mine is the only item to use this in the vanilla game.
; This works for item templates that extend X2WeaponTemplate, so you can make almost anything
;   cheaty concealment retaining, but the default config only includes some neutral items.
OverrideItemConcealment = true

+ConcealedItems = UltrasonicLure
+ConcealedItems = SmokeGrenade
+ConcealedItems = SmokeGrenadeMk2
;   Mk3 is added by some mods like Superior Explosives
+ConcealedItems = SmokeGrenadeMk3


; Fix Frostbite being usable on Frost immune targets. Nothing in the vanilla game is immune to Frost so this
;   doesn't change anything if you don't have mods adding Frost immunity to units or abilities.
; Prevents wasting the ability if you have mods making units Frost immune.
FixFrostbite = true


; Fix Hellweave Vest doing electrical damage instead of fire damage. Amount is the same.
;   Also making it configurable as it wasn't so originally.
; Burning damage can't be configured and is 2 per turn. All damage over time is hard set in code so being
;   able to change that should be another feature entirely.
FixHellweave = true

HellweaveDamage = (Damage=3, Spread=1, PlusOne=0, Crit=0, Pierce=0, Shred=0, Tag="", DamageType="Fire")


; Fix Viper Bind, Viper King Bind, Neonate Viper Bind and Skirmisher Justice demolishing the environment.
;   Tongue Pull and Wrath do not have environmental damage so these should not have it either. The damage was
;   also exceedingly high at 30 which is equal to a Blaster Launcher! This is why Vipers taking cover
;   behind cars instantly exploded when they used Bind.
FixBindExplosions = true


; Fix Spectre and Chosen Assassin being able to use their vanish abilities while flanked which often results in
;   them being instantly revealed on your turn. This uses a modified version of the normal stealth condition with
;   objective item check removed as that should not be checked for enemies.
FixVanish = true


; Fix Dual Strike staying available on a bondmate if they didn't need to use their followup shot.
;   This happened because Dual Strike's shared charge is normally handled by the followup shot. The bondmate that
;   initially used Dual Strike still expended their charge on it.
; This fix just uses the same shared charge mechanic already used by Teamwork.
FixDualStrike = true


; Fix Reaper Claymore getting hidden when out of charges when normally Homing Mine doesn't hide. Also force
;   Dual Strike visible so you can still see its charges when you don't have targets available.
; This can be used to force any ability's icon to always be visible. This option is applied last so make sure
;   you don't have the same ability here and in any of the hiding lists.
ShowAbilityIconAlways = true

+AlwaysShowAbilities = ThrowClaymore
+AlwaysShowAbilities = ThrowShrapnel
+AlwaysShowAbilities = BondmateDualStrike


; Fix Solace affecting or trying to affect cosmetic units, non-units, robots or civilians. This stops the swirly
;   effect appearing on GREMLINs and robots who are not affected anyway civilians having their permanent panic removed.
; Note that Solace and Revival Protocol don't seem to work on friendly VIPs in the first place so this is not changing
;   functionality regarding that.
FixSolaceTargeting = true


; Fix armor piercing ability damage previews not displaying that they pierce armor. Soulfire is a notable example.
; This is achieved by iterating all abilities' damage effects, checking for bIgnoreArmor, and then setting the
;   Pierce value to 1000 on the effect and also iterating all weapons and setting their ExtraDamages to
;   have 1000 Pierce if the DamageTag matches (which means the ability is using damage set on the weapon).
; Modded abilities and weapons are also iterated through, but if you have a mod that changes bIgnoreArmor on any ability
;   after this mod's OPTC has run it can end up being incorrect, you can blacklist those with +PierceFixBlacklistedAbilities.
FixArmorPiercingPreview = true

; Just for example, Void Rift does actually pierce armor by default and is another ability to be fixed by this.
;+PierceFixBlacklistedAbilities=VoidRift
